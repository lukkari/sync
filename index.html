<!DOCTYPE html>
<html>
  <head>
    <title>Folder selection</title>
    <link href='./libs/template.css' media='all' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <div class='app'>

      <h1>Settings</h1>

      <div class='settings'>

        <h2>Schedule contains</h2>
        <section>
          <div>
            <input type='radio' name='contains' id='radioCodeName' />
            <label for='radioCodeName'>Code:Name</label>
          </div>
          <div>
            <input type='radio' name='contains' id='radioCode' />
            <label for='radioCode'>Code</label>
          </div>
        </section>

        <h2>Folder to sync</h2>
        <section>
          <div>
            Selected folder: <code id='selected'></code>
          </div>
          <div>
            <input type='file' id='dir' webkitdirectory directory multiple />
          </div>
        </section>

        <h2>Select Mimosa text file</h2>
        <section>
          <div>
            <input type='file' id='mimosaFile' />
          </div>
        </section>

      </div>

    </div>


    <script>
    window.onload = function () {
      var ipc = require('ipc');

      var dir = document.querySelector('#dir');
      var selected = document.querySelector('#selected');
      var mimosaFile = document.querySelector('#mimosaFile');

      dir.addEventListener('change', function (e) {
        if(!e.target.files.length) return;

        selected.innerText = e.target.files[0].path;
        // Update watchdir config
        ipc.send('watchdir', e.target.files[0].path);
      }, false);


      ipc.on('state', function (state) {
        selected.innerText = state.watchDir;
      });

      mimosaFile.addEventListener('change', function (e) {
        if(!e.target.files.length) return;

        ipc.send('mimosafile', e.target.files[0].path);
      }, false);
    };
    </script>
  </body>
</html>
